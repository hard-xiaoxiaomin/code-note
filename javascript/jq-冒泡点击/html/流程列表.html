<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="google" value="notranslate">
        <title>流程列表</title>
        <link href="../widget/iconfont/iconfont.css" rel="stylesheet">
        <link href="../css/allPage.min.css" rel="stylesheet">
    </head>

    <body class="page-process-list">
        <div class="tools">
            <button class="tool-item">
                <i class="icon">&#xe642;</i>
                <span>创建新流程</span>
            </button>
        </div>

        <table id="processList" class="p-tab-theme-1">
            <thead>
                <tr>
                    <th>序号</th>
                    <th>模型名称</th>
                    <th>模板版本</th>
                    <th>部署流程key</th>
                    <th>事项编码</th>
                    <th>事项名称</th>
                    <th>类型编码</th>
                    <th>类型名称</th>
                    <th>状态</th>
                    <th>最后部署时间</th>
                    <th>最后更新时间</th>
                    <th>操作</th>
                </tr>
            </thead>

            <tbody>
                <tr>
                    <td>1</td>
                    <td>
                        <p class="model-name">请假申请包含调休</p>
                    </td>
                    <td>2</td>
                    <td>guohu55</td>
                    <td>csvd</td>
                    <td>请假申请</td>
                    <td>csvds</td>
                    <td>人事</td>
                    <td>
                        <span class="state-not">未部署</span>
                    </td>
                    <td>2020-02-28 13:23:54</td>
                    <td>2020-02-28 13:23:54</td>
                    <td>
                        <button class="btn-config">配置</button>
                    </td>
                </tr>

                <tr>
                    <td>1</td>
                    <td>
                        <p class="model-name">请假申请包含调休</p>
                    </td>
                    <td>2</td>
                    <td>guohu55</td>
                    <td>csvd</td>
                    <td>请假申请</td>
                    <td>csvds</td>
                    <td>人事</td>
                    <td>
                        <span class="state-already">已部署</span>
                    </td>
                    <td>2020-02-28 13:23:54</td>
                    <td>2020-02-28 13:23:54</td>
                    <td>
                        <button class="btn-config">配置</button>
                    </td>
                </tr>
            </tbody>
        </table>

        <template id="configMenu">
            <div class="config-menu-layer">
                <ul class="menu-list">
                    <li>配置</li>
                    <li>部署</li>
                    <li>删除</li>
                    <li>导出模型</li>
                </ul>
            </div>
        </template>

        <script src="../widget/jquery-1.8.3/jquery.js"></script>
        <link href="../widget/datatables-1.10.13/css/jquery.dataTables.default.css" rel="stylesheet">
        <script src="../widget/datatables-1.10.13/js/jquery.dataTables.js"></script>
        <script>
            $(function() {
                // 表格插件
                $.extend($.fn.dataTable.defaults, {
                    searching: false,
                    ordering: false,
                    'dom': 'rtilp',
                    'language': {
                        "url": "../widget/datatables-1.10.13/js/Chinese.json"
                    }
                });
                $('#processList').DataTable();


                $(".btn-config").on("click", function (events) {

                    $(".btn-config").siblings().find(".config-menu-layer").remove();

                    if( $(".btn-config").siblings(".config-menu-layer").length > 0) {
                        $(".btn-config").siblings(".config-menu-layer").remove()
                    } else {
                        $(this).parent().append($("#configMenu").html());
                    }

                     event.stopPropagation();
                })

                $("#processList tbody td").on("click", function (event) {
                 
                    event.stopPropagation();
                })

                $(document).on("click", function () {
                    $(".btn-config").siblings(".config-menu-layer").remove();
                })
            });
        </script>
    </body>
</html>
